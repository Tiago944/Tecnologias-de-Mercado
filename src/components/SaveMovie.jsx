import { useState } from "react";

const svg = (save) => {
  return save ? (
    <svg
      id="eBQ6Hgx4kj31"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 360.885 360.885"
      shape-rendering="geometricPrecision"
      text-rendering="geometricPrecision"
      project-id="7b866ddb12a14fa7916931251cb3bdfc"
      export-id="c590e450cc7b4a2baccf487211f20cc9"
      cached="false"
    >
      <g>
        <g transform="translate(0 0.000001)">
          <rect
            width="305.811483"
            height="84.928984"
            rx="0"
            ry="0"
            transform="matrix(.437989 0 0 1.018931 198.46615 137.74873)"
            fill="#c8c8c8"
            stroke-width="0"
          />
          <rect
            width="305.811483"
            height="84.928984"
            rx="0"
            ry="0"
            transform="matrix(.437989 0 0 0.595937 113.471467 163.517676)"
            fill="#c8c8c8"
            stroke-width="0"
          />
          <rect
            width="305.811483"
            height="84.928984"
            rx="0"
            ry="0"
            transform="matrix(.447603 0 0 1.018931 23.162385 137.74873)"
            fill="#c8c8c8"
            stroke-width="0"
          />
          <rect
            width="305.811483"
            height="84.928984"
            rx="0"
            ry="0"
            transform="matrix(1 0 0 0.567489 27.536759 137.74873)"
            fill="#c8c8c8"
            stroke-width="0"
          />
        </g>
        <rect
          width="305.811483"
          height="84.928984"
          rx="0"
          ry="0"
          transform="matrix(.060373 0 0 0.574261 4.699628 156.343875)"
          fill="#d2dbed"
          stroke-width="0"
        />
        <rect
          width="305.811483"
          height="84.928984"
          rx="0"
          ry="0"
          transform="matrix(.060373 0 0 0.574261 337.701813 151.644247)"
          fill="#d2dbed"
          stroke-width="0"
        />
        <rect
          width="88.621549"
          height="48.771404"
          rx="0"
          ry="0"
          transform="translate(54.446457 156.343875)"
          fill="#05f"
          stroke-width="0"
        />
        <rect
          width="88.621549"
          height="48.771404"
          rx="0"
          ry="0"
          transform="translate(217.912226 156.056298)"
          fill="#f00"
          stroke-width="0"
        />
        <path d="M141.129,146.755h-84.936c-6.33,0-11.48,4.979-11.48,11.098v45.179c0,6.119,5.15,11.098,11.48,11.098h84.936c6.33,0,11.48-4.979,11.48-11.098v-45.179c0-6.119-5.15-11.098-11.48-11.098Zm-.52,55.375h-83.896v-43.375h83.896v43.375Z" />
        <path d="M304.691,146.755h-84.936c-6.33,0-11.48,4.979-11.48,11.098v45.179c0,6.119,5.15,11.098,11.48,11.098h84.936c6.33,0,11.48-4.979,11.48-11.098v-45.179c.001-6.119-5.15-11.098-11.48-11.098Zm-.519,55.375h-83.896v-43.375h83.896v43.375Z" />
        <path
          d="M351.293,140.206h-6.846c-1.842-7.714-8.776-13.473-17.046-13.473h-293.917c-9.673,0-17.542,7.869-17.542,17.542v.301h-6.35c-5.289,0-9.592,4.303-9.592,9.592v52.548c0,5.289,4.303,9.592,9.592,9.592h6.351v.301c0,9.673,7.869,17.542,17.542,17.542h129.788c3.313,0,6-2.686,6-6v-2.542c0-6.063,4.933-10.995,10.995-10.995h.344c6.063,0,10.995,4.933,10.995,10.995v2.542c0,3.314,2.687,6,6,6h129.793c9.673,0,17.542-7.869,17.542-17.542v-4.67h6.351c5.289,0,9.592-4.303,9.592-9.592v-52.548c0-5.289-4.303-9.593-9.592-9.593ZM12,204.308v-47.732h3.942v47.732h-3.942Zm320.942,12.301c0,3.056-2.486,5.542-5.542,5.542h-124.053c-1.672-11.045-11.23-19.537-22.735-19.537h-.344c-11.505,0-21.063,8.492-22.735,19.537h-124.049c-3.056,0-5.542-2.486-5.542-5.542v-9.893-52.548-9.893c0-3.056,2.486-5.542,5.542-5.542h293.916c3.056,0,5.542,2.486,5.542,5.542v5.523v52.548v14.263Zm15.943-16.67h-3.942v-47.732h3.942v47.732Z"
          stroke="rgba(255,255,255,0)"
          stroke-width="0"
        />
      </g>
    </svg>
  ) : (
    <svg
      fill="#000000"
      height="800px"
      width="800px"
      version="1.1"
      id="Capa_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 360.885 360.885"
      xml:space="preserve"
    >
      <g id="Gafas_3d">
        <path
          d="M141.129,146.755H56.193c-6.33,0-11.48,4.979-11.48,11.098v45.179c0,6.119,5.15,11.098,11.48,11.098h84.936
     c6.33,0,11.48-4.979,11.48-11.098v-45.179C152.609,151.734,147.459,146.755,141.129,146.755z M140.609,202.13H56.713v-43.375
     h83.896V202.13z"
        />
        <path
          d="M304.691,146.755h-84.936c-6.33,0-11.48,4.979-11.48,11.098v45.179c0,6.119,5.15,11.098,11.48,11.098h84.936
     c6.33,0,11.48-4.979,11.48-11.098v-45.179C316.172,151.734,311.021,146.755,304.691,146.755z M304.172,202.13h-83.896v-43.375
     h83.896V202.13z"
        />
        <path
          d="M351.293,140.206h-6.846c-1.842-7.714-8.776-13.473-17.046-13.473H33.484c-9.673,0-17.542,7.869-17.542,17.542v0.301H9.592
     c-5.289,0-9.592,4.303-9.592,9.592v52.548c0,5.289,4.303,9.592,9.592,9.592h6.351v0.301c0,9.673,7.869,17.542,17.542,17.542
     h129.788c3.313,0,6-2.686,6-6v-2.542c0-6.063,4.933-10.995,10.995-10.995h0.344c6.063,0,10.995,4.933,10.995,10.995v2.542
     c0,3.314,2.687,6,6,6H327.4c9.673,0,17.542-7.869,17.542-17.542v-4.67h6.351c5.289,0,9.592-4.303,9.592-9.592v-52.548
     C360.885,144.51,356.582,140.206,351.293,140.206z M12,204.308v-47.732h3.942v47.732H12z M332.942,216.609
     c0,3.056-2.486,5.542-5.542,5.542H203.347c-1.672-11.045-11.23-19.537-22.735-19.537h-0.344c-11.505,0-21.063,8.492-22.735,19.537
     H33.484c-3.056,0-5.542-2.486-5.542-5.542v-9.893v-52.548v-9.893c0-3.056,2.486-5.542,5.542-5.542H327.4
     c3.056,0,5.542,2.486,5.542,5.542v5.523v52.548V216.609z M348.885,199.939h-3.942v-47.732h3.942V199.939z"
        />
      </g>
    </svg>
  );
};

const SaveMovie = ({ movieId }) => {
  const [save, setSave] = useState(() => {
    const savedMovies = JSON.parse(sessionStorage.getItem("Movies")) || []; // vai buscar os "Movies" se n houver Ã© um array vazio
    return savedMovies.includes(movieId);
  });

  const addMovie = () => {
    const savedMovies = JSON.parse(sessionStorage.getItem("Movies")) || [];
    savedMovies.push(movieId);
    sessionStorage.setItem("Movies", JSON.stringify(savedMovies));
    setSave(true);
  };

  const removeMovie = () => {
    const savedMovies = JSON.parse(sessionStorage.getItem("Movies")) || [];
    const updatedMovies = savedMovies.filter((id) => id !== movieId);
    sessionStorage.setItem("Movies", JSON.stringify(updatedMovies));
    setSave(false);
  };

  return (
    <button className="save-button" onClick={save ? removeMovie : addMovie}>
      {svg(save)}
    </button>
  );
};

export default SaveMovie;
